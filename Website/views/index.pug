extends layout

block content
    section
        article(id="introduction")
            h2 #{loc.HOME_TITLE}
            p #{loc.HOME_INTRO}
            //- img(src="", alt="image1")
        article(id="quick-tip" class="frosted-panel")
            h3 #{loc.TIP_TITLE}
            p #{loc.TIP_TEXT}
        div(class="climate-summary frosted-panel")
            h3 Climate - Makers Valley
            table
                thead
                    tr
                        th Month
                        th Avg Temp (Â°C)
                        th Rainfall (mm)
                        th Sunlight (hrs)
                tbody
                    each data in metrics.climate_data
                        tr
                            td= data.month
                            td= data.avg_temp_c
                            td= data.avg_rain_mm
                            td= data.sunlight_hrs
        div(id="home-data")
            div(id="metrics" class="frosted-panel")
                h2 Plants
                div(id="plant-filter")
                div(class="plants-metrics")
                    each plant in metrics.plants
                        article(class="plant-card")
                            h4= plant.name
                            p= plant.type
                            button(
                            type="button"
                            onclick=`showPlantModal(${JSON.stringify({
                                name: plant.name,
                                scientific_name: plant.scientific_name,
                                description: plant.description,
                                season: plant.season,
                                environmental: metrics.environmental_requirements.find(e => e.plant_id === plant.plant_id),
                                tips: metrics.gardening_tips.filter(t => t.plant_id === plant.plant_id)
                            })})`
                            ) More Info
                    each plant in metrics.plants
                        article(class="plant-card")
                            h4= plant.name
                            p= plant.type
                            button(
                            type="button"
                            onclick=`showPlantModal(${JSON.stringify({
                                name: plant.name,
                                scientific_name: plant.scientific_name,
                                description: plant.description,
                                season: plant.season,
                                environmental: metrics.environmental_requirements.find(e => e.plant_id === plant.plant_id),
                                tips: metrics.gardening_tips.filter(t => t.plant_id === plant.plant_id)
                            })})`
                            ) More Info

            div(id="recommendations-panel" class="frosted-panel")
                h2 #{loc.RECOMMENDATIONS_TITLE}
                section(id="recommendations" class="")
                    - for (var i = 0; i < 3; i++)
                        article(class="recommendation-card page-card")
                            h3 #{loc.recs[i].label}
                            p #{loc.recs[i].text}
                            img(src=loc.recs[i].img)
        div(id="home-content")
            section(id="problems")
                article(class="problem-card")
                    h2 #{loc.PROBLEM_TITLE}
                    p #{loc.PROBLEM_TEXT}
                    img(src="images/water-drought.jpg")

//- script.
//-     function showPlantModal(data) {
//-         const text = `
//-             <strong>Scientific Name:</strong> ${data.scientific_name}<br>
//-             <strong>Description:</strong> ${data.description}<br>
//-             <strong>Season:</strong> ${data.season}<br>
//-             <strong>Environment:</strong> ${Object.entries(data.environmental || {}).map(([key, val]) => `${key}: ${val}`).join(", ")}<br>
//-             <strong>Tips:</strong>
//-             <ul>${data.tips.map(tip => `<li>${tip.tip}</li>`).join("")}</ul>
//-         `;

//-         const modal = new Modal({
//-             type: "info",
//-             title: `About ${data.scientific_name}`,
//-             text: text,
//-             image: ""
//-         });

//-         modal.Show();
//-     }